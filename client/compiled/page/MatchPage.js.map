{"version":3,"sources":["../../src/page/MatchPage.js"],"names":[],"mappings":"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","file":"MatchPage.js","sourcesContent":["\"use strict\";\nconst Page_1 = require(\"./Page\");\nconst Socket_1 = require(\"../socket/Socket\");\nconst MatchMove_1 = require(\"../socket/message/MatchMove\");\nconst PageLoader_1 = require(\"./PageLoader\");\nconst EntryPage_1 = require(\"./EntryPage\");\nconst MatchMakingPage_1 = require(\"./MatchMakingPage\");\nconst PlayerHelper_1 = require(\"../player/PlayerHelper\");\nconst Player_1 = require(\"../player/Player\");\nclass MatchPage extends Page_1.Page {\n    showPage() {\n        super.showTemplate('match-page-main-row');\n        PlayerHelper_1.PlayerHelper.updateCurrentPlayerView(this);\n        PlayerHelper_1.PlayerHelper.updateOpponentPlayerView(this);\n        this.socket = Socket_1.Socket.getInstance();\n        this.socket.addSocketListener(this);\n        this.socket.sendObject(\"MatchReady\");\n        super.setTemplateEventHandler('board', \".board-container .board-row .board-square-piece\", 'click', (element) => {\n            var x = parseInt(element.parentElement.getAttribute(\"data-instance-identity\"));\n            var y = parseInt(element.parentElement.parentElement.getAttribute(\"data-instance-identity\"));\n            var data = new MatchMove_1.MatchMove();\n            data.x = x;\n            data.y = y;\n            this.socket.sendObject(\"MatchMoveRequest\", data);\n        });\n        super.setTemplateEventHandler('match-ended-modal-template', '.match-ended-modal-menu-button', 'click', (element) => {\n            super.hideModal('#match-ended-modal');\n            PageLoader_1.PageLoader.render(EntryPage_1.EntryPage, this);\n        });\n        super.setTemplateEventHandler('match-ended-modal-template', '.match-ended-modal-new-match-button', 'click', (element) => {\n            super.hideModal('#match-ended-modal');\n            PageLoader_1.PageLoader.render(MatchMakingPage_1.MatchMakingPage, this);\n        });\n    }\n    hidePage() {\n        super.hideModal('#match-ended-modal');\n        super.hideTemplate('match-page-main-row');\n    }\n    showMove(x, y, piece) {\n        super.updateElementText(\".board-container [data-instance-identity='\" + y + \"'] [data-instance-identity='\" + x + \"'] .board-square-piece-char\", piece);\n    }\n    onSocketObjectReceived(messageObject) {\n        if (messageObject.type == \"MatchBegin\") {\n            var currentPlayerPiece = messageObject.data.currentPlayerPiece;\n            var otherPlayerPiece = messageObject.data.otherPlayerPiece;\n            super.updateElementText(\"[data-instance-identity='current-player'] .player-piece\", \"Piece: \" + currentPlayerPiece.toUpperCase());\n            super.removeElementClass(\"[data-instance-identity='current-player'] .player-piece\", \"hide\");\n            super.updateElementText(\"[data-instance-identity='other-player'] .player-piece\", \"Piece: \" + otherPlayerPiece.toUpperCase());\n            super.removeElementClass(\"[data-instance-identity='other-player'] .player-piece\", \"hide\");\n        }\n        else if (messageObject.type == \"MatchMove\") {\n            var x = messageObject.data.x;\n            var y = messageObject.data.y;\n            var piece = messageObject.data.piece;\n            this.showMove(x, y, piece);\n        }\n        else if (messageObject.type == \"MatchWon\") {\n            super.updateElementText(\"#match-ended-modal .modal-text\", \"You Won!\");\n            Player_1.Player.getPlayerInstance().setWins(Player_1.Player.getPlayerInstance().getWins() + 1);\n            Player_1.Player.getOpponentPlayerInstance().setLosses(Player_1.Player.getOpponentPlayerInstance().getLosses() + 1);\n            PlayerHelper_1.PlayerHelper.updateCurrentPlayerView(this);\n            PlayerHelper_1.PlayerHelper.updateOpponentPlayerView(this);\n            super.showModal(\"#match-ended-modal\");\n        }\n        else if (messageObject.type == \"MatchLost\") {\n            super.updateElementText(\"#match-ended-modal .modal-text\", \"Match Lost\");\n            Player_1.Player.getOpponentPlayerInstance().setWins(Player_1.Player.getOpponentPlayerInstance().getWins() + 1);\n            Player_1.Player.getPlayerInstance().setLosses(Player_1.Player.getPlayerInstance().getLosses() + 1);\n            PlayerHelper_1.PlayerHelper.updateCurrentPlayerView(this);\n            PlayerHelper_1.PlayerHelper.updateOpponentPlayerView(this);\n            super.showModal(\"#match-ended-modal\");\n        }\n        else if (messageObject.type == \"MatchEnd\") {\n            super.updateElementText(\"#match-ended-modal .modal-text\", \"Match Ended\");\n            super.showModal(\"#match-ended-modal\");\n        }\n        else if (messageObject.type == \"CurrentPlayerUpdate\") {\n            if (messageObject.data.currentPlayer == \"current\") {\n                super.removeElementClass(\"[data-instance-identity='current-player'] .player-turn-indicator\", \"hide\");\n                super.addElementClass(\"[data-instance-identity='other-player'] .player-turn-indicator\", \"hide\");\n            }\n            else if (messageObject.data.currentPlayer == \"opponent\") {\n                console.log(\"Setting indicator\");\n                super.removeElementClass(\"[data-instance-identity='other-player'] .player-turn-indicator\", \"hide\");\n                super.addElementClass(\"[data-instance-identity='current-player'] .player-turn-indicator\", \"hide\");\n            }\n        }\n    }\n    onSocketClosed() {\n    }\n    onSocketOpened() {\n    }\n}\nexports.MatchPage = MatchPage;\n//# sourceMappingURL=MatchPage.js.map"]}